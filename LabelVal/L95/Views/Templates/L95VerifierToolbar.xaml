<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:watchers="clr-namespace:Watchers.lib.Process;assembly=Watchers.lib">

    <!--  Local (moved) flat toolbar style  -->
    <Style
        x:Key="FlatToolBarStyle"
        BasedOn="{StaticResource {x:Type ToolBar}}"
        TargetType="ToolBar">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToolBar">
                    <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}">
                        <ItemsPresenter />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  Shared toolbar for L95 Verifier  -->
    <DataTemplate x:Key="L95VerifierToolbarTemplate">
        <!--  DataContext is expected to be the Verifier (SelectedDevice)  -->

        <ToolBarTray
            Margin="3"
            VerticalAlignment="Top"
            DataContext="{Binding}"
            IsLocked="True"
            Orientation="Vertical">
            <ToolBar
                Padding="0"
                VerticalAlignment="Top"
                VerticalContentAlignment="Top"
                Background="{DynamicResource MahApps.HamburgerMenu.Pane.Background}"
                Style="{StaticResource FlatToolBarStyle}">

                <!--  Connect / Disconnect  -->
                <Button
                    Margin="3,3,3,0"
                    BorderThickness="0"
                    Command="{Binding ConnectCommand}">
                    <Button.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.Button}" TargetType="Button">
                            <Setter Property="Content">
                                <Setter.Value>
                                    <iconPacks:Modern Kind="Connect" />
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Controller.IsConnected}" Value="True">
                                    <Setter Property="Content">
                                        <Setter.Value>
                                            <iconPacks:Modern Kind="Disconnect" />
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <!--  LVS Super User  -->
                <Button
                    Margin="3,3,3,0"
                    BorderThickness="0"
                    Command="{Binding EnterLvsCredentialsCommand}"
                    ToolTip="Login as LVS super user">
                    <Button.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.Button}" TargetType="Button">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Controller.ProcessState}" Value="{x:Static watchers:Win32_ProcessWatcherProcessState.Exited}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                    <iconPacks:PackIconMaterial Kind="AccountStar" />
                </Button>

                <!--  Admin  -->
                <Button
                    Margin="3"
                    BorderThickness="0"
                    Command="{Binding EnterAdminCredentialsCommand}"
                    ToolTip="Login as Admin">
                    <Button.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.Button}" TargetType="Button">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Controller.ProcessState}" Value="{x:Static watchers:Win32_ProcessWatcherProcessState.Exited}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                    <iconPacks:PackIconMaterial Kind="ShieldAccount" />
                </Button>

            </ToolBar>
        </ToolBarTray>

    </DataTemplate>
</ResourceDictionary>