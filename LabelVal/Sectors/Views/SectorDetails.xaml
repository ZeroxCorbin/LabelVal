<UserControl
    x:Class="LabelVal.Sectors.Views.SectorDetails"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:V275Converters="clr-namespace:LabelVal.V275.Converters"
    xmlns:ViewModels="clr-namespace:LabelVal.Sectors.Interfaces"
    xmlns:bar_common="clr-namespace:BarcodeVerification.lib.Common;assembly=BarcodeVerification.lib"
    xmlns:converters="clr-namespace:LabelVal.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:local="clr-namespace:LabelVal.Sectors.Views"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    d:DataContext="{d:DesignInstance Type=ViewModels:ISector}"
    mc:Ignorable="d">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="booltovis" />
        <converters:StringCamelUnspaced2StringPascalSpaced x:Key="stringToUpper" />
        <V275Converters:V275_OCMatchModeToString x:Key="MatchModeToString" />
        <V275Converters:V275_GS1FormattedOutput x:Key="gs1FormattedOutput" />

        <Border
            x:Key="Seperator"
            Height="2"
            BorderThickness="2" />

        <Image x:Key="barcode-1d" Source="/Assets/Images/barcode-1d.png" />
        <Image x:Key="barcode-2d" Source="/Assets/Images/barcode-2d.png" />
        <Image x:Key="ocr" Source="/Assets/Images/ocr.png" />
        <Image x:Key="ocv" Source="/Assets/Images/ocv.png" />
        <Image x:Key="flaw" Source="/Assets/Images/FlawTool.png" />
    </UserControl.Resources>



    <DockPanel>
        <DockPanel.Background>
            <SolidColorBrush Opacity="0.5" Color="{DynamicResource MahApps.Colors.Accent}" />
        </DockPanel.Background>

        <md:Card
            Margin="3"
            Padding="0"
            Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
            Foreground="{DynamicResource MahApps.Brushes.Text}">

            <StackPanel Margin="3">

                <!--  Name, Wrong Standard, Overall Grade String  -->
                <DockPanel Margin="3" DockPanel.Dock="Top">
                    <TextBlock
                        HorizontalAlignment="Center"
                        Background="{DynamicResource SectorError_Brush}"
                        DockPanel.Dock="Top"
                        Text="WRONG STANDARD"
                        Visibility="{Binding IsWrongStandard, Converter={StaticResource BooleanToVisibilityConverter}, Mode=OneTime}" />

                    <TextBlock Text="{Binding Template.Username, Mode=OneTime}" />
                    <TextBlock
                        Margin="3,0"
                        Foreground="{DynamicResource ColorBlindBrush2}"
                        Text="{Binding Template.Version, StringFormat={}{0}}" />

                    <TextBlock HorizontalAlignment="Right" Text="{Binding Report.OverallGradeString}" />
                </DockPanel>

                <!--  Icon, Symbology, Decode Text  -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Symbology Image  -->
                    <Border
                        Grid.Column="0"
                        Width="30"
                        Height="30"
                        Margin="3,3,0,0"
                        VerticalAlignment="Top"
                        Background="White">
                        <Border.Style>
                            <Style TargetType="{x:Type Border}">
                                <Setter Property="Visibility" Value="Visible" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Report, Mode=OneTime}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>

                        <Image Stretch="Fill">
                            <Image.Style>
                                <Style TargetType="{x:Type Image}">
                                    <Setter Property="Source" Value="/Assets/Images/barcode-1d.png" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Type2D}">
                                            <Setter Property="Source" Value="/Assets/Images/barcode-2d.png" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCR}">
                                            <Setter Property="Source" Value="/Assets/Images/ocr.png" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCV}">
                                            <Setter Property="Source" Value="/Assets/Images/ocv.png" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Blemish}">
                                            <Setter Property="Source" Value="/Assets/Images/FlawTool.png" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                        </Image>
                    </Border>

                    <DockPanel Grid.Column="1">

                        <!--  Symbology Name  -->
                        <TextBlock Margin="3,0" DockPanel.Dock="Top">
                            <TextBlock.Style>
                                <Style TargetType="{x:Type TextBlock}">

                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Type1D}">
                                            <Setter Property="Text" Value="{Binding Report.SymbolType, Converter={StaticResource EnumValueToDescription}, Mode=OneTime}" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Type2D}">
                                            <Setter Property="Text" Value="{Binding Report.SymbolType, Converter={StaticResource EnumValueToDescription}, Mode=OneTime}" />
                                        </DataTrigger>

                                        <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCR}">
                                            <Setter Property="Text" Value="{Binding Template.MatchSettings.FixedText, Mode=OneTime}" />
                                            <Setter Property="Foreground" Value="{DynamicResource MahApps.Brushes.Text}" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCV}">
                                            <Setter Property="Text" Value="{Binding Template.MatchSettings.FixedText, Mode=OneTime}" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Blemish}">
                                            <Setter Property="Text" Value="" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>


                        <Expander md:ExpanderAssist.HorizontalHeaderPadding="1" IsEnabled="{Binding Report.GS1Results, Converter={StaticResource IsNotNull}}">
                            <Expander.Style>
                                <Style BasedOn="{StaticResource MaterialDesignExpander}" TargetType="{x:Type Expander}">

                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Report.GS1Results, Converter={StaticResource IsNullOrEmpty}}" Value="true">
                                            <Setter Property="md:ExpanderAssist.ExpanderButtonContent" Value="{x:Null}" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Expander.Style>

                            <Expander.Header>
                                <!--  Decode Text & OCR  -->
                                <TextBlock
                                    Margin="3,0"
                                    DockPanel.Dock="Top"
                                    TextWrapping="Wrap">
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Type1D}">
                                                    <Setter Property="Text" Value="{Binding Report.DecodeText, Mode=OneTime}" />
                                                    <Setter Property="ToolTip" Value="{Binding Report.DecodeText, Mode=OneTime}" />
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Type2D}">
                                                    <Setter Property="Text" Value="{Binding Report.DecodeText, Mode=OneTime}" />
                                                    <Setter Property="ToolTip" Value="{Binding Report.DecodeText, Mode=OneTime}" />
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCR}">
                                                    <Setter Property="Text" Value="{Binding Report.Text, Mode=OneTime}" />
                                                    <Setter Property="ToolTip" Value="{Binding Report.Text, Mode=OneTime}" />
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCV}">
                                                    <Setter Property="Text" Value="{Binding Report.Text, Mode=OneTime}" />
                                                    <Setter Property="ToolTip" Value="{Binding Report.Text, Mode=OneTime}" />
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Blemish}">
                                                    <Setter Property="Text" Value="" />
                                                    <Setter Property="ToolTip" Value="" />
                                                </DataTrigger>

                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </Expander.Header>

                            <DockPanel>
                                <ItemsControl
                                    Margin="3,0"
                                    DockPanel.Dock="Top"
                                    ItemsSource="{Binding Report.GS1Results.Fields, Mode=OneTime}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}" TextWrapping="Wrap" />
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                                <TextBlock
                                    Margin="3,0"
                                    Background="{DynamicResource MahApps.Brushes.Accent3}"
                                    TextWrapping="Wrap">
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">

                                            <Setter Property="Visibility" Value="Collapsed" />

                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Type1D}">
                                                    <Setter Property="Text" Value="{Binding Report.GS1Results.Input, Converter={StaticResource gs1FormattedOutput}}" />
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Type2D}">
                                                    <Setter Property="Text" Value="{Binding Report.GS1Results.Input, Converter={StaticResource gs1FormattedOutput}}" />
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Report.GS1Results, Converter={StaticResource IsNullOrEmpty}}" Value="False">
                                                    <Setter Property="Visibility" Value="Visible" />
                                                </DataTrigger>

                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </DockPanel>
                        </Expander>





                    </DockPanel>

                    <!--  Overall Grade Button  -->
                    <Button
                        Grid.Column="2"
                        Width="30"
                        Height="30"
                        Margin="3"
                        VerticalAlignment="Top"
                        BorderThickness="3"
                        IsHitTestVisible="False">
                        <Button.Style>
                            <Style BasedOn="{StaticResource MahApps.Styles.Button.Square.Accent}" TargetType="{x:Type Button}">
                                <Setter Property="Background" Value="{DynamicResource CB_Green}" />
                                <Setter Property="BorderBrush" Value="{DynamicResource CB_Green}" />

                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsError, Mode=OneTime}" Value="True">
                                        <Setter Property="BorderBrush" Value="{DynamicResource SectorError_Brush}" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsWarning, Mode=OneTime}" Value="True">
                                        <Setter Property="BorderBrush" Value="{DynamicResource SectorWarning_Brush}" />
                                    </DataTrigger>

                                    <DataTrigger Binding="{Binding Report.OverallGradeLetter, Mode=OneTime}" Value="B">
                                        <Setter Property="Background" Value="{DynamicResource ISO_GradeB_Brush}" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Report.OverallGradeLetter, Mode=OneTime}" Value="C">
                                        <Setter Property="Background" Value="{DynamicResource ISO_GradeC_Brush}" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Report.OverallGradeLetter, Mode=OneTime}" Value="D">
                                        <Setter Property="Background" Value="{DynamicResource ISO_GradeD_Brush}" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Report.OverallGradeLetter, Mode=OneTime}" Value="F">
                                        <Setter Property="Background" Value="{DynamicResource ISO_GradeF_Brush}" />
                                    </DataTrigger>

                                </Style.Triggers>
                            </Style>
                        </Button.Style>

                        <Button.Content>
                            <TextBlock>
                                <TextBlock.Style>
                                    <Style BasedOn="{StaticResource {x:Type TextBlock}}" TargetType="{x:Type TextBlock}">

                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Type1D}">
                                                <Setter Property="Text" Value="{Binding Report.OverallGradeValue, StringFormat=N1, Mode=OneTime}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Type2D}">
                                                <Setter Property="Text" Value="{Binding Report.OverallGradeValue, StringFormat=N1, Mode=OneTime}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCR}">
                                                <Setter Property="Text" Value="{Binding Report.Score, Mode=OneTime}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCV}">
                                                <Setter Property="Text" Value="{Binding Report.Score, Mode=OneTime}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Blemish}">
                                                <Setter Property="Text" Value="{Binding Report.BlemishCount, Mode=OneTime}" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Button.Content>
                    </Button>

                </Grid>

                <Separator />

                <!--  Apeture and X Dimension  -->
                <DockPanel>
                    <DockPanel.Style>
                        <Style TargetType="{x:Type DockPanel}">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCR}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.OCV}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Report.Type, Mode=OneTime}" Value="{x:Static bar_common:AvailableRegionTypes.Blemish}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Report, Mode=OneTime}" Value="{x:Null}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>

                    <UniformGrid DockPanel.Dock="Top" Rows="1">
                        <TextBox
                            Margin="3,0"
                            HorizontalAlignment="Center"
                            md:TextFieldAssist.PrefixText="Aperture"
                            md:TextFieldAssist.SuffixText="{Binding Report.Units}"
                            BorderThickness="0"
                            IsHitTestVisible="False"
                            Text="{Binding Report.Aperture}" />
                        <TextBox
                            Margin="3,0"
                            HorizontalAlignment="Left"
                            md:TextFieldAssist.PrefixText="X-Dim"
                            md:TextFieldAssist.SuffixText="{Binding Report.Units}"
                            BorderThickness="0"
                            IsHitTestVisible="False"
                            Text="{Binding Report.XDimension, StringFormat=N1}" />
                    </UniformGrid>

                </DockPanel>

                <!--  Grade Values  -->
                <DockPanel>
                    <DockPanel.Style>
                        <Style TargetType="{x:Type DockPanel}">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SectorDetails.GradeValues.Count, Mode=OneTime}" Value="0">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>

                    <Separator DockPanel.Dock="Top" />

                    <ItemsControl ItemsSource="{Binding SectorDetails.GradeValues, Mode=OneTime}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock
                                        Grid.Column="0"
                                        Text="{Binding Path=Name, Converter={StaticResource stringToUpper}, Mode=OneTime}"
                                        TextWrapping="Wrap" />

                                    <DockPanel
                                        Grid.Column="1"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center">
                                        <TextBlock Margin="3,0" Text="{Binding Path=Value, Mode=OneTime, StringFormat={}({0:N1})}" />

                                        <TextBlock Margin="3,0" Text="{Binding Path=Grade.Value, StringFormat=N1, Mode=OneTime}" />

                                        <Border
                                            Width="10"
                                            Height="10"
                                            BorderThickness="0"
                                            CornerRadius="5">
                                            <Border.Style>
                                                <Style TargetType="{x:Type Border}">
                                                    <Setter Property="Background" Value="{DynamicResource CB_Green}" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Grade.Letter, Mode=OneTime}" Value="B">
                                                            <Setter Property="Background" Value="{DynamicResource ISO_GradeB_Brush}" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Grade.Letter, Mode=OneTime}" Value="C">
                                                            <Setter Property="Background" Value="{DynamicResource ISO_GradeC_Brush}" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Grade.Letter, Mode=OneTime}" Value="D">
                                                            <Setter Property="Background" Value="{DynamicResource ISO_GradeD_Brush}" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Grade.Letter, Mode=OneTime}" Value="F">
                                                            <Setter Property="Background" Value="{DynamicResource ISO_GradeF_Brush}" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                        </Border>

                                        <TextBlock
                                            MinWidth="10"
                                            Margin="3,0"
                                            Text="{Binding Path=Grade.Letter, Mode=OneTime}" />
                                    </DockPanel>


                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>

                    </ItemsControl>
                </DockPanel>

                <!--  Values  -->
                <DockPanel>
                    <DockPanel.Style>
                        <Style TargetType="{x:Type DockPanel}">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SectorDetails.Values.Count, Mode=OneTime}" Value="0">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>

                    <Separator DockPanel.Dock="Top" />

                    <ItemsControl ItemsSource="{Binding SectorDetails.Values, Mode=OneTime}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0" Text="{Binding Path=Name, Converter={StaticResource stringToUpper}, Mode=OneTime}" />

                                    <TextBlock
                                        Grid.Column="1"
                                        Margin="6,0"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Text="{Binding Path=Value, Mode=OneTime, StringFormat={}{0}}" />
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </DockPanel>

                <!--  Value Results  -->
                <DockPanel>
                    <DockPanel.Style>
                        <Style TargetType="{x:Type DockPanel}">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SectorDetails.ValueResults.Count, Mode=OneTime}" Value="0">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>

                    <Separator DockPanel.Dock="Top" />

                    <ItemsControl ItemsSource="{Binding SectorDetails.ValueResults, Mode=OneTime}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock
                                        Grid.Column="0"
                                        Text="{Binding Path=Name, Converter={StaticResource stringToUpper}, Mode=OneTime}"
                                        TextWrapping="Wrap" />

                                    <TextBlock
                                        Grid.Column="1"
                                        Margin="3,0"
                                        VerticalAlignment="Center"
                                        Text="{Binding Path=Value, StringFormat={}(0), Mode=OneTime}" />

                                    <Border
                                        Grid.Column="2"
                                        Width="10"
                                        Height="10"
                                        BorderThickness="0"
                                        CornerRadius="5">
                                        <Border.Style>
                                            <Style TargetType="{x:Type Border}">
                                                <Setter Property="Background" Value="{DynamicResource CB_Green}" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Path=Result, Mode=OneTime}" Value="FAIL">
                                                        <Setter Property="Background" Value="{DynamicResource SectorError_Brush}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Path=Result, Mode=OneTime}" Value="ERROR">
                                                        <Setter Property="Background" Value="{DynamicResource SectorError_Brush}" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                    </Border>

                                    <TextBlock
                                        Grid.Column="3"
                                        MinWidth="26"
                                        Margin="3,0"
                                        VerticalAlignment="Center"
                                        Text="{Binding Path=Result, Mode=OneTime}" />
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>

                    </ItemsControl>
                </DockPanel>

                <!--  GS1 Value Results  -->
                <DockPanel>
                    <DockPanel.Style>
                        <Style TargetType="{x:Type DockPanel}">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding SectorDetails.Gs1ValueResults.Count, Converter={StaticResource NumberZeroOrNull}, Mode=OneTime}" Value="False" />
                                        <Condition Binding="{Binding Report.Standard}" Value="{x:Static bar_common:AvailableStandards.GS1}" />
                                    </MultiDataTrigger.Conditions>
                                    <MultiDataTrigger.Setters>
                                        <Setter Property="Visibility" Value="Visible" />
                                    </MultiDataTrigger.Setters>
                                </MultiDataTrigger>
                                <DataTrigger Binding="{Binding Report.SymbolType, Mode=OneTime}" Value="{x:Static bar_common:AvailableSymbologies.Aztec}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>

                    <Separator DockPanel.Dock="Top" />

                    <ItemsControl ItemsSource="{Binding SectorDetails.Gs1ValueResults, Mode=OneTime}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock
                                        Grid.Column="0"
                                        Text="{Binding Path=Name, Converter={StaticResource stringToUpper}, Mode=OneTime}"
                                        TextWrapping="Wrap" />

                                    <TextBox
                                        Grid.Column="1"
                                        Margin="3,-3"
                                        VerticalAlignment="Center"
                                        md:TextFieldAssist.SuffixText="{Binding DataContext.Report.Units, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                        BorderThickness="0"
                                        IsHitTestVisible="False">
                                        <TextBox.Style>
                                            <Style BasedOn="{StaticResource MaterialDesignTextBox}" TargetType="TextBox">
                                                <Setter Property="Text" Value="{Binding Path=Value, StringFormat=N1, Mode=OneTime}" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding DataContext.Report.Units, RelativeSource={RelativeSource AncestorType=ItemsControl}}" Value="mm">
                                                        <Setter Property="Text" Value="{Binding Path=Value, StringFormat=N3, Mode=OneTime}" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBox.Style>
                                    </TextBox>

                                    <Border
                                        Grid.Column="2"
                                        Width="10"
                                        Height="10"
                                        BorderThickness="0"
                                        CornerRadius="5">
                                        <Border.Style>
                                            <Style TargetType="{x:Type Border}">
                                                <Setter Property="Background" Value="{DynamicResource CB_Green}" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Path=Result, Mode=OneTime}" Value="FAIL">
                                                        <Setter Property="Background" Value="{DynamicResource SectorError_Brush}" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                    </Border>

                                    <TextBlock
                                        Grid.Column="3"
                                        MinWidth="26"
                                        Margin="3,0"
                                        VerticalAlignment="Center"
                                        Text="{Binding Path=Result, Mode=OneTime}" />
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>

                    </ItemsControl>

                </DockPanel>

                <!--  GS1 Grades  -->
                <DockPanel>
                    <DockPanel.Style>
                        <Style TargetType="{x:Type DockPanel}">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SectorDetails.Gs1Grades.Count, Mode=OneTime}" Value="0">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Report.SymbolType, Mode=OneTime}" Value="{x:Static bar_common:AvailableSymbologies.Aztec}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>

                    <Separator DockPanel.Dock="Top" />

                    <ItemsControl ItemsSource="{Binding SectorDetails.Gs1Grades, Mode=OneTime}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="auto" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0" Text="{Binding Path=Name, Converter={StaticResource stringToUpper}, Mode=OneTime}" />
                                    <TextBlock
                                        Grid.Column="1"
                                        Margin="3,0"
                                        VerticalAlignment="Center"
                                        Text="{Binding Path=Value, StringFormat=N1, Mode=OneTime}" />

                                    <Border
                                        Grid.Column="2"
                                        Width="10"
                                        Height="10"
                                        BorderThickness="0"
                                        CornerRadius="5">
                                        <Border.Style>
                                            <Style TargetType="{x:Type Border}">
                                                <Setter Property="Background" Value="{DynamicResource CB_Green}" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Letter, Mode=OneTime}" Value="B">
                                                        <Setter Property="Background" Value="{DynamicResource ISO_GradeB_Brush}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Letter, Mode=OneTime}" Value="C">
                                                        <Setter Property="Background" Value="{DynamicResource ISO_GradeC_Brush}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Letter, Mode=OneTime}" Value="D">
                                                        <Setter Property="Background" Value="{DynamicResource ISO_GradeD_Brush}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Letter, Mode=OneTime}" Value="F">
                                                        <Setter Property="Background" Value="{DynamicResource ISO_GradeF_Brush}" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                    </Border>

                                    <TextBlock
                                        Grid.Column="3"
                                        Margin="3,0"
                                        VerticalAlignment="Center"
                                        Text="{Binding Path=Letter, Mode=OneTime}" />

                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>

                    </ItemsControl>

                </DockPanel>

                <!--  Alarms  -->
                <DockPanel>
                    <DockPanel.Style>
                        <Style TargetType="{x:Type DockPanel}">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SectorDetails.Alarms.Count, Mode=OneTime}" Value="0">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>

                    <Separator DockPanel.Dock="Top" />

                    <ItemsControl ItemsSource="{Binding SectorDetails.Alarms, Mode=OneTime}">
                        <ItemsControl.ItemTemplate>

                            <DataTemplate>
                                <DockPanel>

                                    <DockPanel Margin="3,0" DockPanel.Dock="Top">
                                        <Border
                                            Width="10"
                                            Height="10"
                                            BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                                            BorderThickness="1"
                                            CornerRadius="3">
                                            <Border.Style>
                                                <Style TargetType="{x:Type Border}">
                                                    <Setter Property="Background" Value="{DynamicResource CB_Green}" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Category, Mode=OneTime}" Value="2">
                                                            <Setter Property="Background" Value="{DynamicResource SectorError_Brush}" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Category, Mode=OneTime}" Value="1">
                                                            <Setter Property="Background" Value="{DynamicResource SectorWarning_Brush}" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                        </Border>

                                        <TextBlock
                                            Margin="3,0"
                                            Text="{Binding Name, Converter={StaticResource stringToUpper}, Mode=OneTime}"
                                            TextWrapping="Wrap" />
                                        <TextBlock
                                            Margin="3,0"
                                            Text="{Binding Data.SubAlarm, Converter={StaticResource stringToUpper}, Mode=OneTime}"
                                            TextWrapping="Wrap" />
                                    </DockPanel>

                                    <DockPanel>
                                        <DockPanel.Style>
                                            <Style TargetType="DockPanel">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Data.Text}" Value="{x:Null}">
                                                        <Setter Property="Visibility" Value="Collapsed" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </DockPanel.Style>

                                        <TextBlock
                                            Margin="3,0"
                                            Text="{Binding Data.Text, Mode=OneTime}"
                                            TextWrapping="Wrap" />
                                        <TextBlock
                                            Margin="3,0"
                                            Text="{Binding Data.Expected, Mode=OneTime}"
                                            TextWrapping="Wrap" />
                                    </DockPanel>

                                </DockPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>

                    </ItemsControl>
                </DockPanel>

            </StackPanel>
        </md:Card>

    </DockPanel>
</UserControl>
