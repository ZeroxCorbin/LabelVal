<dialog:CustomDialog
    x:Class="LabelVal.Dialogs.ImageViewerDialogView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:LabelVal.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:diag="clr-namespace:LabelVal.Dialogs"
    xmlns:dialog="clr-namespace:MahApps.Metro.Controls.Dialogs;assembly=MahApps.Metro"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:local="clr-namespace:LabelVal.Dialogs"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:paz="clr-namespace:Wpf.Controls.PanAndZoom;assembly=Wpf.Controls.PanAndZoom"
    Width="{Binding Width}"
    Height="{Binding Height}"
    d:DataContext="{d:DesignInstance Type=diag:ImageViewerDialogViewModel}"
    d:DesignHeight="800"
    d:DesignWidth="800"
    dialog:DialogParticipation.Register="{Binding}"
    Loaded="CustomDialog_Loaded"
    PreviewKeyDown="CustomDialog_PreviewKeyDown"
    mc:Ignorable="d">
    <dialog:CustomDialog.Resources>
        <converters:Double2String x:Key="Double2String" />
    </dialog:CustomDialog.Resources>

    <dialog:CustomDialog.DialogTop>

        <Grid HorizontalAlignment="Center" VerticalAlignment="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <DockPanel HorizontalAlignment="Right">

                <Button
                    Name="CloseButton"
                    Width="30"
                    Height="30"
                    Margin="3"
                    Click="CloseButton_Click"
                    Style="{StaticResource MahApps.Styles.Button.Hamburger}">
                    <iconPacks:Modern Kind="Close" />
                </Button>

            </DockPanel>

            <md:Card
                x:Name="CrdSource"
                Grid.Row="0"
                HorizontalAlignment="Center"
                Background="{DynamicResource MahApps.HamburgerMenu.Pane.Background}"
                Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}">

                <DockPanel>

                    <DockPanel Margin="3">

                        <TextBox
                            Margin="5,0"
                            md:TextFieldAssist.SuffixText="px"
                            BorderThickness="0"
                            IsHitTestVisible="False"
                            Text="{Binding Image.PixelWidth, Mode=OneWay}" />

                        <TextBox
                            Margin="5,0"
                            md:TextFieldAssist.SuffixText="px"
                            BorderThickness="0"
                            IsHitTestVisible="False"
                            Text="{Binding Image.PixelHeight, Mode=OneWay}" />

                        <DockPanel Margin="6,0">

                            <TextBox
                                Margin="5,0"
                                md:TextFieldAssist.SuffixText="DPI"
                                BorderThickness="0"
                                IsHitTestVisible="False"
                                Text="{Binding Image.DpiX, StringFormat=N, Converter={StaticResource Double2String}, Mode=OneWay}" />

                            <TextBox
                                Margin="5,0"
                                md:TextFieldAssist.SuffixText="DPI"
                                BorderThickness="0"
                                IsHitTestVisible="False"
                                Text="{Binding Image.DpiY, StringFormat=N, Converter={StaticResource Double2String}, Mode=OneWay}" />

                        </DockPanel>

                        <Button
                            Name="Reset"
                            Margin="3"
                            Click="Reset_Click"
                            Content="{iconPacks:Material Kind=ArrowExpandAll}"
                            Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}"
                            Style="{StaticResource MahApps.Styles.Button.Hamburger}" />

                    </DockPanel>
                </DockPanel>
            </md:Card>

            <paz:ZoomBorder
                Name="ZoomBorder"
                Grid.Row="1"
                ClipToBounds="True">
                <Grid x:Name="GrdOverlays" HorizontalAlignment="Center" />
            </paz:ZoomBorder>

        </Grid>



    </dialog:CustomDialog.DialogTop>


</dialog:CustomDialog>
