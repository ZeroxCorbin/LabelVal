<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks">

    <Style
        x:Key="FlatToolBarStyle"
        BasedOn="{StaticResource {x:Type ToolBar}}"
        TargetType="ToolBar">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToolBar">
                    <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}">
                        <ItemsPresenter />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  Shared toolbar for L95 Verifier  -->
    <DataTemplate x:Key="V275NodeToolbarTemplate">
        <ToolBarTray
            Margin="3"
            VerticalAlignment="Top"
            DataContext="{Binding}"
            IsLocked="True"
            Orientation="Vertical">
            <ToolBar
                Padding="0,0,0,3"
                VerticalAlignment="Top"
                VerticalContentAlignment="Top"
                Background="{DynamicResource MahApps.HamburgerMenu.Pane.Background}"
                Style="{StaticResource FlatToolBarStyle}">

                <!--  Centralized spacing + sizing  -->
                <ToolBar.Resources>
                    <!--  Adjust this Thickness once to affect all buttons  -->
                    <Thickness x:Key="L95ToolBarButtonSpacing">3,3,3,0</Thickness>

                    <!--  Implicit style for all buttons in this toolbar  -->
                    <Style
                        x:Key="ToolBarButtons"
                        BasedOn="{StaticResource MahApps.Styles.Button}"
                        TargetType="Button">
                        <Setter Property="Margin" Value="{StaticResource L95ToolBarButtonSpacing}" />
                        <Setter Property="BorderThickness" Value="0" />
                    </Style>
                </ToolBar.Resources>

                <!--  Login / Logout  -->
                <Button Command="{Binding LoginCommand}">
                    <Button.Style>
                        <Style BasedOn="{StaticResource ToolBarButtons}" TargetType="{x:Type Button}">
                            <Setter Property="Content">
                                <Setter.Value>
                                    <iconPacks:Modern Kind="Connect" />
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Controller.IsLoggedIn}" Value="True">
                                    <Setter Property="Content">
                                        <Setter.Value>
                                            <iconPacks:Modern Kind="Disconnect" />
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <!--  Login Monitor Toggle  -->
                <ToggleButton
                    Margin="3,3,3,0"
                    BorderThickness="0"
                    IsChecked="{Binding LoginMonitor}"
                    ToolTipService.ShowOnDisabled="True">
                    <ToggleButton.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.ToggleButton}" TargetType="ToggleButton">
                            <Setter Property="ToolTip" Value="Login control." />
                            <Setter Property="IsEnabled" Value="True" />
                            <Setter Property="Content" Value="{iconPacks:FontAwesome Kind=TerminalSolid}" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding LoginMonitor}" Value="True">
                                    <Setter Property="ToolTip" Value="Login monitor." />
                                    <Setter Property="Content" Value="{iconPacks:Modern Kind=Monitor}" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Controller.IsLoggedIn}" Value="True">
                                    <Setter Property="IsEnabled" Value="False" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ToggleButton.Style>
                </ToggleButton>

                <!--  Open in Browser  -->
                <Button Command="{Binding OpenInBrowserCommand}" ToolTip="Open V275 web interface.">
                    <Button.Style>
                        <Style BasedOn="{StaticResource ToolBarButtons}" TargetType="Button" />
                    </Button.Style>
                    <iconPacks:PackIconModern Kind="Browser" />
                </Button>

            </ToolBar>
        </ToolBarTray>
    </DataTemplate>
</ResourceDictionary>