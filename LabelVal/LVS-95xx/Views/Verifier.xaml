<UserControl
    x:Class="LabelVal.LVS_95xx.Views.Verifier"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Converters="clr-namespace:LabelVal.Converters"
    xmlns:ViewModels="clr-namespace:LabelVal.LVS_95xx.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:json="clr-namespace:JSONViewer_WPF;assembly=JSONViewer_WPF"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:paz="clr-namespace:Wpf.Controls.PanAndZoom;assembly=Wpf.Controls.PanAndZoom"
    d:DataContext="{d:DesignInstance Type=ViewModels:Verifier}"
    mc:Ignorable="d">

    <md:Card
        Margin="6"
        Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
        BorderBrush="{DynamicResource MahApps.Brushes.Accent4}"
        BorderThickness="1"
        Foreground="{DynamicResource MahApps.Brushes.ThemeForeground}">

        <DockPanel Margin="3">

            <DockPanel VerticalAlignment="Top">

                <md:Card
                    Margin="3"
                    Padding="3"
                    Background="{DynamicResource MahApps.Brushes.Accent4}"
                    DockPanel.Dock="Top">

                    <Button BorderThickness="0" Command="{Binding ConnectCommand}">
                        <Button.Style>
                            <Style BasedOn="{StaticResource MahApps.Styles.Button}" TargetType="{x:Type Button}">
                                <Setter Property="Content">
                                    <Setter.Value>
                                        <iconPacks:Modern Kind="Connect" />
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Controller.SerialPort.IsListening}" Value="True">
                                        <Setter Property="Content">
                                            <Setter.Value>
                                                <iconPacks:Modern Kind="Disconnect" />
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                </md:Card>

                <Button
                    Width="24"
                    Height="24"
                    Margin="3"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Click="btnShowSettings_Click"
                    ToolTip="Show Settings">
                    <Button.Style>
                        <Style BasedOn="{StaticResource GroupHeaderCirlceButton}" TargetType="Button">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsDocked, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                    <iconPacks:PackIconMaterial
                        Width="18"
                        Height="18"
                        Kind="Cog" />
                </Button>

            </DockPanel>

            <md:DrawerHost
                x:Name="drwSettings"
                VerticalAlignment="Top"
                DrawerClosing="drwSettings_DrawerClosing"
                DrawerOpened="drwSettings_DrawerOpened">

                <md:DrawerHost.TopDrawerContent>

                    <md:Card
                        Margin="3"
                        Padding="2"
                        HorizontalAlignment="Left"
                        Background="{DynamicResource MahApps.Brushes.ThemeBackground}">
                        <md:Card.Style>
                            <Style TargetType="md:Card">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsTopDrawerOpen, ElementName=drwSettings}" Value="True">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </md:Card.Style>

                        <DockPanel>

                            <DockPanel DockPanel.Dock="Top">
                                <ComboBox
                                    Margin="3"
                                    md:HintAssist.Hint="COM Port"
                                    md:HintAssist.IsFloating="True"
                                    ItemsSource="{Binding AvailablePorts}"
                                    SelectedItem="{Binding SelectedComName}">
                                    <ComboBox.Style>
                                        <Style BasedOn="{StaticResource MaterialDesignFloatingHintComboBox}" TargetType="ComboBox">
                                            <Setter Property="IsEnabled" Value="True" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Controller.SerialPort.IsListening}" Value="True">
                                                    <Setter Property="IsEnabled" Value="False" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ComboBox.Style>
                                </ComboBox>

                                <Button
                                    VerticalAlignment="Bottom"
                                    Command="{Binding RefreshComListCommand}"
                                    Content="{iconPacks:Material Kind=Refresh}"
                                    Style="{StaticResource GroupHeaderCirlceButton}"
                                    ToolTip="Refresh" />

                            </DockPanel>

                            <DockPanel>

                                <TextBox
                                    Height="48"
                                    MaxWidth="220"
                                    Margin="3"
                                    HorizontalAlignment="Left"
                                    HorizontalContentAlignment="Left"
                                    md:HintAssist.FloatingHintHorizontalAlignment="Left"
                                    md:HintAssist.Hint="LVS95xx Database"
                                    md:HintAssist.IsFloating="True"
                                    IsHitTestVisible="false"
                                    Text="{Binding DatabasePath}"
                                    TextWrapping="Wrap">
                                    <TextBox.Style>
                                        <Style BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}" TargetType="{x:Type TextBox}">
                                            <Setter Property="md:HintAssist.FloatingOffset" Value="0,-20" />
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>

                                <Button
                                    Margin="10,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Bottom"
                                    Command="{Binding Manager.DeleteCommand}"
                                    CommandParameter="{Binding}"
                                    Content="{iconPacks:Material Kind=Delete}"
                                    Style="{StaticResource GroupHeaderCirlceButton}"
                                    ToolTip="Delete this verifier?" />
                            </DockPanel>
                        </DockPanel>
                    </md:Card>
                </md:DrawerHost.TopDrawerContent>

                <DockPanel>

                    <DockPanel DockPanel.Dock="Top">

                        <TextBox
                            Margin="6,3"
                            d:Text="Camera"
                            md:HintAssist.Hint="Type"
                            BorderThickness="0"
                            IsHitTestVisible="False"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            Text="Camera" />

                        <TextBox
                            Margin="6,3"
                            d:Text="LVS-95xx"
                            md:HintAssist.Hint="Model"
                            BorderThickness="0"
                            IsHitTestVisible="False"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            Text="LVS-95xx" />


                        <TextBox
                            Margin="6,3"
                            d:Text="192.168.188.2"
                            md:HintAssist.Hint="Port"
                            BorderThickness="0"
                            IsHitTestVisible="False"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            Text="{Binding Path=SelectedComName, Mode=OneWay}" />

                    </DockPanel>

                    <DockPanel>

                        <TextBox
                            Margin="6,3"
                            d:Text="State"
                            md:HintAssist.Hint="Connection"
                            BorderThickness="0"
                            IsHitTestVisible="False">

                            <TextBox.Style>
                                <Style BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}" TargetType="{x:Type TextBox}">

                                    <Setter Property="Text" Value="Offline" />

                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Controller.SerialPort.IsListening}" Value="True">
                                            <Setter Property="Text" Value="Online" />
                                        </DataTrigger>

                                    </Style.Triggers>
                                </Style>
                            </TextBox.Style>
                        </TextBox>

                        <TextBox
                            Margin="6,3"
                            d:Text="Exited"
                            md:HintAssist.Hint="Process"
                            BorderThickness="0"
                            IsHitTestVisible="False"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            Text="{Binding Path=ProcessState, Mode=OneWay}" />

                    </DockPanel>
                </DockPanel>
            </md:DrawerHost>

            <Expander
                MaxHeight="450"
                VerticalAlignment="Top"
                md:ExpanderAssist.HorizontalHeaderPadding="3"
                Background="{DynamicResource MahApps.Brushes.Accent4}"
                DockPanel.Dock="Top">

                <Expander.Style>
                    <Style BasedOn="{StaticResource MaterialDesignExpander}" TargetType="Expander">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsDocked, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Expander.Style>

                <Expander.Header>
                    <TextBlock MinWidth="48" Text="Results" />
                </Expander.Header>

                <md:Card Padding="1" Background="{DynamicResource MahApps.Brushes.ThemeBackground}">

                    <ScrollViewer Width="300" Height="400">
                        <TextBox
                            BorderThickness="0"
                            IsReadOnly="True"
                            Text="{Binding Controller.ReadData.Packet, Mode=OneWay}"
                            TextWrapping="Wrap" />
                    </ScrollViewer>
                </md:Card>

            </Expander>

            <Button
                Padding="8,6"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Click="btnUnselect"
                Content="{iconPacks:Material Kind=ArrowCollapseRight}"
                Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}">
                <Button.Style>
                    <Style BasedOn="{StaticResource MahApps.Styles.Button.Hamburger}" TargetType="Button">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsDocked, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="False">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

        </DockPanel>

    </md:Card>

</UserControl>
