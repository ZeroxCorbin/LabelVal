<UserControl
    x:Class="LabelVal.Results.Views.ImageResultEntry"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Dialog="clr-namespace:MahApps.Metro.Controls.Dialogs;assembly=MahApps.Metro"
    xmlns:ViewModels="clr-namespace:LabelVal.Results.ViewModels"
    xmlns:converters="clr-namespace:LabelVal.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:local="clr-namespace:LabelVal.Results.Views"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    Dialog:DialogParticipation.Register="{Binding}"
    d:DataContext="{d:DesignInstance Type=ViewModels:ImageResultEntry,
                                     IsDesignTimeCreatable=False}"
    Loaded="UserControl_Loaded"
    Unloaded="UserControl_Unloaded"
    mc:Ignorable="d">

    <DockPanel HorizontalAlignment="Left">

        <md:Card
            Height="48"
            Margin="3"
            HorizontalAlignment="Left"
            Background="{DynamicResource MahApps.HamburgerMenu.Pane.Background}"
            DockPanel.Dock="Top"
            Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}">

            <DockPanel>

                <DockPanel Width="48" Height="48">

                    <DockPanel
                        Width="36"
                        Margin="0,4,0,2"
                        VerticalAlignment="Top"
                        DockPanel.Dock="Top">
                        <iconPacks:PackIconMaterial
                            Width="30"
                            Height="18"
                            HorizontalAlignment="Center"
                            Kind="ImageText" />
                    </DockPanel>

                    <TextBlock
                        Margin="11,0,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        FontSize="{DynamicResource MahApps.Font.Size.Dialog.Message}"
                        FontWeight="Bold"
                        Text="{Binding SourceImage.Order}" />
                </DockPanel>

                <Border Style="{StaticResource imageBar}" />

                <!--  Only Print Source Image  -->
                <Button
                    Width="48"
                    d:Visibility="Visible"
                    Command="{Binding V275ProcessCommand}"
                    CommandParameter="{x:Static ViewModels:ImageResultEntryImageTypes.V275Print}"
                    Style="{StaticResource MahApps.Styles.Button.Hamburger}"
                    ToolTip="Print the source image.">

                    <Grid>
                        <mah:ProgressRing
                            Width="28"
                            Height="28"
                            Foreground="White"
                            IsActive="{Binding IsV275Working}" />

                        <iconPacks:PackIconMaterial
                            Width="24"
                            Height="24"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}"
                            Kind="Printer" />
                    </Grid>
                </Button>

                <!--  V275  -->
                <Button
                    Width="48"
                    Height="48"
                    Margin="0"
                    Padding="0"
                    d:Visibility="Visible"
                    Background="{DynamicResource V275_Brush}"
                    Command="{Binding V275ProcessCommand}">

                    <Grid>

                        <mah:Badged
                            BadgeBackground="{DynamicResource MahApps.HamburgerMenu.Pane.Background}"
                            BadgeMargin="3"
                            BadgePlacementMode="BottomRight">
                            <mah:Badged.Badge>
                                <iconPacks:PackIconMaterial Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}" Kind="MagicStaff" />
                            </mah:Badged.Badge>

                            <mah:Badged.Style>
                                <Style TargetType="mah:Badged">


                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding ImageResults.SelectedImageRoll.SectorType}" Value="Dynamic">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>

                                </Style>
                            </mah:Badged.Style>

                        </mah:Badged>

                        <Grid>
                            <mah:ProgressRing
                                Width="28"
                                Height="28"
                                Foreground="White"
                                IsActive="{Binding IsV275Working}" />
                            <Image
                                Width="24"
                                Height="24"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Source="/Assets/Images/v275-white-outline.ico" />
                        </Grid>
                    </Grid>

                    <Button.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.Button.MetroSquare}" TargetType="{x:Type Button}">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Setter Property="BorderBrush" Value="{DynamicResource V275_Brush}" />

                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV275Node.Controller.IsSimulator}" Value="False" />
                                        <Condition Binding="{Binding ImageResults.SelectedV275Node.Controller.IsLoggedIn_Control}" Value="True" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                    <Setter Property="ToolTip" Value="Print the source image and read the results." />
                                </MultiDataTrigger>


                                <!--
                                    Is Logged In with Simulator
                                    No Stored Results
                                -->
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV275Node.Controller.IsSimulator}" Value="True" />
                                        <Condition Binding="{Binding ImageResults.SelectedV275Node.Controller.IsLoggedIn}" Value="True" />
                                        <Condition Binding="{Binding V275ResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="True" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="BorderBrush" Value="{DynamicResource YellowBrush2}" />
                                    <Setter Property="Visibility" Value="Visible" />
                                    <Setter Property="ToolTip" Value="V275: Process the source image with the simulator." />
                                </MultiDataTrigger>

                                <!--
                                    Is Logged In with Simulator
                                    Has Stored Results
                                -->
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV275Node.Controller.IsSimulator}" Value="True" />
                                        <Condition Binding="{Binding ImageResults.SelectedV275Node.Controller.IsLoggedIn}" Value="True" />
                                        <Condition Binding="{Binding V275ResultRow.StoredImage, Converter={StaticResource IsNullOrEmpty}}" Value="False" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="BorderBrush" Value="{DynamicResource YellowBrush2}" />
                                    <Setter Property="Visibility" Value="Visible" />
                                    <Setter Property="ToolTip" Value="V275: Process the stored image with the simulator." />
                                </MultiDataTrigger>

                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <!--  V5 Trigger  -->
                <!--<Border
                    Margin="0,0,0,0"
                    BorderBrush="{DynamicResource V5_Brush}"
                    BorderThickness="1"
                    CornerRadius="3"
                    d:Visibility="Visible">
                    <Border.Style>
                        <Style  TargetType="{x:Type Border}">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Setter Property="ToolTip" Value="Trigger V5 and add the image and results to the image roll." />
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="False" />
                                        <Condition Binding="{Binding ImageResults.SelectedImageRoll.IsLocked}" Value="False" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>-->

                <Border
                    Margin="3,0,0,0"
                    BorderBrush="{DynamicResource V5_Brush}"
                    BorderThickness="1"
                    CornerRadius="3">

                    <Border.Style>
                        <Style TargetType="{x:Type Border}">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="True" />
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                        <Condition Binding="{Binding V5ResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="True" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                </MultiDataTrigger>

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="True" />
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                        <Condition Binding="{Binding V5ResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="False" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                </MultiDataTrigger>

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="False" />
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>

                    <Button
                        Width="48"
                        Height="48"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        Command="{Binding V5ProcessCommand}"
                        Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}"
                        ToolTipService.ShowOnDisabled="True">
                        <Button.Style>
                            <Style BasedOn="{StaticResource MahApps.Styles.Button.Hamburger}" TargetType="{x:Type Button}">
                                <Style.Triggers>
                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="True" />
                                            <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                            <Condition Binding="{Binding V5ResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="True" />
                                        </MultiDataTrigger.Conditions>

                                        <Setter Property="ToolTip" Value="V5: Process the source image with the simulator." />
                                        <Setter Property="BorderBrush" Value="{DynamicResource YellowBrush2}" />
                                    </MultiDataTrigger>

                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="True" />
                                            <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                            <Condition Binding="{Binding V5ResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="False" />
                                        </MultiDataTrigger.Conditions>

                                        <Setter Property="ToolTip" Value="V5: Process the stored image with the simulator." />
                                        <Setter Property="BorderBrush" Value="{DynamicResource YellowBrush2}" />
                                    </MultiDataTrigger>

                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="False" />
                                            <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                        </MultiDataTrigger.Conditions>

                                        <Setter Property="ToolTip" Value="V5: Process the sensor image." />
                                    </MultiDataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>


                        <DockPanel>
                            <TextBlock
                                HorizontalAlignment="Center"
                                DockPanel.Dock="Top"
                                Style="{StaticResource MahApps.Styles.TextBlock.AutoCollapsing}"
                                Text="V5"
                                Visibility="{Binding AppSettings.ShowButtonText, Converter={StaticResource BooleanToVisibilityConverter}}" />

                            <Grid Background="{DynamicResource V5_Brush}">
                                <!--<Image
                                    Width="24"
                                    Height="24"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    Source="/Assets/Images/v5-white-outline.ico" />-->
                                <Grid HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Grid.Style>
                                        <Style TargetType="{x:Type Grid}">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                            <Style.Triggers>
                                                <!--<MultiDataTrigger>
                                                    <MultiDataTrigger.Conditions>
                                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="True" />
                                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                                        <Condition Binding="{Binding V5ResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="True" />
                                                    </MultiDataTrigger.Conditions>

                                                    <Setter Property="Visibility" Value="Visible" />
                                                </MultiDataTrigger>-->

                                                <!--<MultiDataTrigger>
                                                    <MultiDataTrigger.Conditions>
                                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="True" />
                                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                                        <Condition Binding="{Binding V5ResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="False" />
                                                    </MultiDataTrigger.Conditions>

                                                    <Setter Property="Visibility" Value="Visible" />
                                                </MultiDataTrigger>-->

                                                <MultiDataTrigger>
                                                    <MultiDataTrigger.Conditions>
                                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="False" />
                                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                                    </MultiDataTrigger.Conditions>

                                                    <Setter Property="Visibility" Value="Visible" />
                                                </MultiDataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Grid.Style>

                                    <iconPacks:PackIconMaterial
                                        Width="18"
                                        Height="18"
                                        Margin="3,0"
                                        VerticalAlignment="Center"
                                        Kind="CameraIris" />
                                    <mah:ProgressRing
                                        Width="22"
                                        Height="22"
                                        Margin="0,0,1,0"
                                        Foreground="White"
                                        IsActive="{Binding IsV5Working}" />
                                </Grid>

                            </Grid>

                        </DockPanel>



                    </Button>
                </Border>
                <!--</Border>-->

                <!--  V5 Process Source Image  -->
                <Button
                    Width="48"
                    Height="48"
                    d:Visibility="Visible"
                    Background="{DynamicResource V5_Brush}"
                    Command="{Binding V5ProcessCommand}">

                    <Grid>
                        <mah:ProgressRing
                            Width="28"
                            Height="28"
                            Foreground="White"
                            IsActive="{Binding IsV5Working}" />
                        <Image
                            Width="24"
                            Height="24"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Source="/Assets/Images/v5-white-outline.ico" />
                    </Grid>

                    <Button.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.Button.MetroSquare}" TargetType="{x:Type Button}">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Setter Property="BorderBrush" Value="{DynamicResource V5_Brush}" />
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="True" />
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                        <Condition Binding="{Binding V5ResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="True" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                    <Setter Property="CommandParameter" Value="{x:Static ViewModels:ImageResultEntryImageTypes.Source}" />
                                    <Setter Property="ToolTip" Value="V5: Process the source image with the simulator." />
                                    <Setter Property="BorderBrush" Value="{DynamicResource YellowBrush2}" />
                                </MultiDataTrigger>

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="True" />
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                        <Condition Binding="{Binding V5ResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="False" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                    <Setter Property="CommandParameter" Value="{x:Static ViewModels:ImageResultEntryImageTypes.V5Stored}" />
                                    <Setter Property="ToolTip" Value="V5: Process the stored image with the simulator." />
                                    <Setter Property="BorderBrush" Value="{DynamicResource YellowBrush2}" />
                                </MultiDataTrigger>

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="False" />
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                    <Setter Property="CommandParameter" Value="{x:Static ViewModels:ImageResultEntryImageTypes.V5Sensor}" />
                                    <Setter Property="ToolTip" Value="V5: Process the sensor image." />
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <!--  L95xx Select  -->
                <ToggleButton
                    Width="48"
                    d:Visibility="Visible"
                    BorderBrush="{DynamicResource L95xx_Brush}"
                    Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}"
                    IsChecked="{Binding IsL95xxSelected}">
                    <ToggleButton.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.ToggleButton}" TargetType="ToggleButton">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Setter Property="ToolTip" Value="" />
                            <Setter Property="Background" Value="{DynamicResource MahApps.HamburgerMenu.Pane.Background}" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsL95xxSelected}" Value="True">
                                    <Setter Property="ToolTip" Value="L95xx Data is redirected here." />
                                    <Setter Property="Background" Value="{DynamicResource L95xx_Brush}" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ImageResults.SelectedL95.Controller.IsConnected}" Value="True">
                                    <Setter Property="Visibility" Value="Visible" />
                                </DataTrigger>
                            </Style.Triggers>

                        </Style>
                    </ToggleButton.Style>

                    <md:ToggleButtonAssist.OnContent>
                        <Image Source="/Assets/Images/l95xx-white-outline.ico" />
                    </md:ToggleButtonAssist.OnContent>

                    <Image Source="/Assets/Images/l95xx-white-outline.ico" />

                </ToggleButton>


                <!--  L95xx Process Image  -->
                <Button
                    Width="48"
                    Height="48"
                    d:Visibility="Visible"
                    Background="{DynamicResource L95xx_Brush}"
                    Command="{Binding L95xxProcessCommand}"
                    IsEnabled="{Binding IsL95xxWorking, Converter={StaticResource InvertBool}}">

                    <Grid>
                        <mah:ProgressRing
                            Width="28"
                            Height="28"
                            Foreground="White"
                            IsActive="{Binding IsL95xxWorking}" />
                        <Image
                            Width="24"
                            Height="24"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Source="/Assets/Images/l95xx-white-outline.ico" />
                    </Grid>

                    <Button.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.Button.MetroSquare}" TargetType="{x:Type Button}">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Setter Property="BorderBrush" Value="{DynamicResource L95xx_Brush}" />
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedL95.Controller.IsConnected}" Value="True" />
                                        <Condition Binding="{Binding L95xxResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="True" />
                                        <Condition Binding="{Binding ImageResults.SelectedL95.Controller.Process, Converter={StaticResource IsNullOrEmpty}}" Value="False" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                    <Setter Property="CommandParameter" Value="{x:Static ViewModels:ImageResultEntryImageTypes.Source}" />
                                    <Setter Property="ToolTip" Value="95xx: Process the source image with the simulator." />
                                    <Setter Property="BorderBrush" Value="{DynamicResource YellowBrush2}" />
                                </MultiDataTrigger>

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedL95.Controller.IsConnected}" Value="True" />
                                        <Condition Binding="{Binding L95xxResultRow, Converter={StaticResource IsNullOrEmpty}}" Value="False" />
                                        <Condition Binding="{Binding ImageResults.SelectedL95.Controller.Process, Converter={StaticResource IsNullOrEmpty}}" Value="False" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                    <Setter Property="CommandParameter" Value="{x:Static ViewModels:ImageResultEntryImageTypes.L95xxStored}" />
                                    <Setter Property="ToolTip" Value="L95xx: Process the stored image with the simulator." />
                                    <Setter Property="BorderBrush" Value="{DynamicResource YellowBrush2}" />
                                </MultiDataTrigger>

                                <!--<MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsSimulator}" Value="False" />
                                        <Condition Binding="{Binding ImageResults.SelectedV5.Controller.IsConnected}" Value="True" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Visibility" Value="Visible" />
                                    <Setter Property="CommandParameter" Value="sensor" />
                                    <Setter Property="ToolTip" Value="V5: Process the sensor image." />
                                </MultiDataTrigger>-->
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

            </DockPanel>
        </md:Card>

        <md:Card
            Width="48"
            Margin="3,0,0,0"
            HorizontalAlignment="Left"
            Background="{DynamicResource MahApps.HamburgerMenu.Pane.Background}"
            DockPanel.Dock="Left"
            Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}">

            <DockPanel>

                <Button
                    x:Name="btnMove"
                    Height="48"
                    d:Visibility="Visible"
                    Click="btnMove_Click"
                    Content="{iconPacks:Material Kind=ArrowUpDownBold,
                                                 Width=24,
                                                 Height=24}"
                    DockPanel.Dock="Top"
                    Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}"
                    ToolTip="Move">
                    <Button.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.Button.Hamburger}" TargetType="Button">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ImageResults.SelectedImageRoll.IsLocked}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <Popup x:Name="popMove" Width="{Binding ActualWidth, ElementName=btnMove}">

                    <md:Card
                        Padding="3"
                        Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                        BorderBrush="{DynamicResource MahApps.Brushes.Accent2}"
                        BorderThickness="2"
                        Style="{StaticResource MaterialDesignElevatedCard}">
                        <StackPanel>

                            <Button
                                Margin="0,3"
                                VerticalAlignment="Top"
                                d:Visibility="Visible"
                                BorderThickness="0"
                                Click="btnMoveImage_Click"
                                Content="{iconPacks:Material Kind=ArrowCollapseUp}"
                                Tag="top"
                                ToolTip="Move to Top">

                                <Button.Style>
                                    <Style BasedOn="{StaticResource MahApps.Styles.Button}" TargetType="Button">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding SourceImage.Order}" Value="1">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding ImageResults.SelectedImageRoll.IsLocked}" Value="True">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <Button
                                Margin="0,3"
                                VerticalAlignment="Top"
                                d:Visibility="Visible"
                                BorderThickness="0"
                                Click="btnMoveImage_Click"
                                Content="{iconPacks:Material Kind=ArrowUp}"
                                Tag="up"
                                ToolTip="Move Up">

                                <Button.Style>
                                    <Style BasedOn="{StaticResource MahApps.Styles.Button}" TargetType="Button">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding SourceImage.Order}" Value="1">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding ImageResults.SelectedImageRoll.IsLocked}" Value="True">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <Separator />

                            <Button
                                Margin="0,3"
                                VerticalAlignment="Top"
                                d:Visibility="Visible"
                                BorderThickness="0"
                                Click="btnMoveImage_Click"
                                Content="{iconPacks:Material Kind=ArrowDown}"
                                Tag="down"
                                ToolTip="Move Down">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource MahApps.Styles.Button}" TargetType="Button">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding ImageResults.SelectedImageRoll.IsLocked}" Value="True">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <Button
                                Margin="0,3"
                                VerticalAlignment="Top"
                                d:Visibility="Visible"
                                BorderThickness="0"
                                Click="btnMoveImage_Click"
                                Content="{iconPacks:Material Kind=ArrowCollapseDown}"
                                Tag="bottom"
                                ToolTip="Move to Bottom">

                                <Button.Style>
                                    <Style BasedOn="{StaticResource MahApps.Styles.Button}" TargetType="Button">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding ImageResults.SelectedImageRoll.IsLocked}" Value="True">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                        </StackPanel>
                    </md:Card>
                </Popup>

                <Button
                    Height="48"
                    d:Visibility="Visible"
                    Click="btnShowDetailsToggle"
                    DockPanel.Dock="Top"
                    Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}">

                    <iconPacks:PackIconMaterial Kind="InformationVariant" />

                    <Button.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.Button.Hamburger}" TargetType="{x:Type Button}">
                            <Setter Property="ToolTip" Value="Show printer area overlay." />

                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ShowPrinterAreaOverSource}" Value="True">
                                    <Setter Property="ToolTip" Value="Hide printer area overlay." />
                                </DataTrigger>

                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <Button
                    Height="48"
                    VerticalAlignment="Bottom"
                    d:Visibility="Visible"
                    Command="{Binding ImageResults.DeleteImageCommand}"
                    CommandParameter="{Binding}"
                    Content="{iconPacks:Material Kind=Delete,
                                                 Width=24,
                                                 Height=24}"
                    DockPanel.Dock="Top"
                    Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}"
                    ToolTip="Delete">
                    <Button.Style>
                        <Style BasedOn="{StaticResource MahApps.Styles.Button.Hamburger}" TargetType="{x:Type Button}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ImageResults.SelectedImageRoll.IsLocked}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

            </DockPanel>

        </md:Card>

        <DockPanel DockPanel.Dock="Top">
            <Border Style="{StaticResource groupLeft}" />
            <Border Style="{StaticResource groupBottom}" />

            <ScrollViewer
                mah:ScrollViewerHelper.BubbleUpScrollEventToParentScrollviewer="True"
                DockPanel.Dock="Top"
                HorizontalScrollBarVisibility="Auto"
                Style="{StaticResource MahApps.Styles.ScrollViewer}"
                VerticalScrollBarVisibility="Disabled">
                <DockPanel>

                    <local:ImageResultEntry_Images DataContext="{Binding}" />

                    <local:ImageResultDeviceEntry_V275 DataContext="{Binding}" />

                    <local:ImageResultDeviceEntry_L95 DataContext="{Binding}" />

                    <local:ImageResultDeviceEntry_V5 DataContext="{Binding}" />

                </DockPanel>
            </ScrollViewer>
        </DockPanel>

    </DockPanel>
</UserControl>
