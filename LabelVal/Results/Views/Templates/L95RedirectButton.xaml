<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:barCommon="clr-namespace:BarcodeVerification.lib.Common;assembly=BarcodeVerification.lib"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="SharedButtonStyles.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <!--  Resource for L95 device-specific redirect button.  -->
    <Button
        x:Key="L95RedirectButton"
        BorderBrush="{DynamicResource L95_Brush_Active}"
        Command="{Binding ToggleL95SelectionCommand}"
        IsEnabled="{Binding IsL95Working, Converter={StaticResource InvertBool}}">
        <Button.Style>
            <Style BasedOn="{StaticResource DeviceButton}" TargetType="Button">
                <Setter Property="ToolTip" Value="Redirect L95 results to this image roll." />
                <Setter Property="Content">
                    <Setter.Value>
                        <DockPanel>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    DockPanel.Dock="Top"
                                    Text="L95"
                                    Visibility="{Binding AppSettings.ShowButtonText, Converter={StaticResource BooleanToVisibilityConverter}}" />

                                <Grid>
                                    <Image
                                        Width="24"
                                        Height="24"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Source="/Assets/Images/l95-white-outline.ico" />
                                </Grid>
                            </DockPanel>
                        </DockPanel>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>

                    <!--  Visual state when L95 redirection is active.  -->
                    <DataTrigger Binding="{Binding IsL95Selected}" Value="True">
                        <Setter Property="ToolTip" Value="L95 results are being redirected to this image roll. Click to disable." />
                        <Setter Property="Content">
                            <Setter.Value>
                                <DockPanel>
                                    <TextBlock
                                        HorizontalAlignment="Center"
                                        DockPanel.Dock="Top"
                                        Text="L95"
                                        Visibility="{Binding AppSettings.ShowButtonText, Converter={StaticResource BooleanToVisibilityConverter}}" />

                                    <Grid Background="{DynamicResource L95_Brush_Active}">
                                        <Grid
                                            Margin="3,6"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Bottom">

                                            <iconPacks:PackIconMaterial
                                                Width="18"
                                                Height="18"
                                                Margin="3,0"
                                                VerticalAlignment="Center"
                                                Kind="Headphones" />
                                        </Grid>

                                        <iconPacks:PackIconMaterial
                                            Width="18"
                                            Height="18"
                                            Margin="0,6"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Bottom"
                                            Kind="ChevronTripleDown" />
                                    </Grid>
                                </DockPanel>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>

                    <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.Offline}">
                        <Setter Property="Visibility" Value="Collapsed" />
                    </DataTrigger>
                </Style.Triggers>

            </Style>
        </Button.Style>
    </Button>
</ResourceDictionary>