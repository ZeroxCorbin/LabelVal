<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:barCommon="clr-namespace:BarcodeVerification.lib.Common;assembly=BarcodeVerification.lib"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:vm="clr-namespace:LabelVal.Results.ViewModels">


    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="SharedButtonStyles.xaml" />
    </ResourceDictionary.MergedDictionaries>
    <!--  Resource for V275 device-specific buttons. This is dynamically loaded into the main toolbar.  -->
    <DockPanel x:Key="V275Buttons">

        <!--  V275  -->
        <Border
            Margin="3,0,0,0"
            VerticalAlignment="Center"
            BorderBrush="{DynamicResource V275_Brush_Active}"
            BorderThickness="1"
            CornerRadius="3">

            <Border.Style>
                <Style TargetType="{x:Type Border}">
                    <Style.Triggers>
                        <!--  Hides the button if the V275 handler is offline.  -->
                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.Offline}">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>

                        <!--  ToolTips change based on the current V275 handler mode.  -->
                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorDetect}">
                            <Setter Property="ToolTip" Value="V275: Process the source image and detect sectors." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorRestore}">
                            <Setter Property="ToolTip" Value="V275: Process the source image and restore sectors from the database." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorTrigger}">
                            <Setter Property="ToolTip" Value="V275: Process the source image without sector detection or restoration." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.CameraDetect}">
                            <Setter Property="ToolTip" Value="V275: Trigger the printer, then detect sectors." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.CameraRestore}">
                            <Setter Property="ToolTip" Value="V275: Trigger the printer, then restore sectors from the database." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.CameraTrigger}">
                            <Setter Property="ToolTip" Value="V275: Trigger the printer." />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>

            <Button
                Command="{Binding AddDeviceImageCommand}"
                CommandParameter="{x:Static vm:ResultsEntryDevices.V275}"
                Style="{StaticResource DeviceButton}">

                <DockPanel>
                    <TextBlock
                        HorizontalAlignment="Center"
                        DockPanel.Dock="Top"
                        Style="{StaticResource MahApps.Styles.TextBlock.AutoCollapsing}"
                        Text="V275"
                        Visibility="{Binding AppSettings.ShowButtonText, Converter={StaticResource BooleanToVisibilityConverter}}" />

                    <Grid Background="{DynamicResource V275_Brush_Active}">

                        <!--  Progress bar shown when the V275 device is busy.  -->
                        <mah:MetroProgressBar
                            Width="62"
                            Height="6"
                            Padding="0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Foreground="White"
                            IsIndeterminate="{Binding IsV275Working}"
                            Visibility="{Binding IsV275Working, Converter={StaticResource BooleanToVisibilityConverter}}" />

                        <!--  Icons indicating the current mode (Camera/Simulator) and action (Detect/Restore/Trigger).  -->
                        <!--  Camera  -->
                        <Grid
                            Margin="0,6"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.CameraDetect}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>

                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.CameraRestore}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>

                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.CameraTrigger}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                Margin="3,0"
                                VerticalAlignment="Center"
                                Kind="Camera" />
                        </Grid>

                        <!--  Simulator  -->
                        <Grid
                            Margin="0,6"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorDetect}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorRestore}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorTrigger}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                Margin="3,0"
                                VerticalAlignment="Center"
                                Kind="CameraImage" />

                        </Grid>

                        <!--  Detect  -->
                        <Grid
                            Margin="0,6"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorDetect}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.CameraDetect}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                Margin="3,0"
                                VerticalAlignment="Center"
                                Kind="DataMatrixScan" />
                        </Grid>

                        <!--  Restore  -->
                        <!--<Grid
                            Margin="0,6"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static bar_common:LabelHandlers.SimulatorRestore}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static bar_common:LabelHandlers.CameraRestore}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                Margin="3,0"
                                VerticalAlignment="Center"
                                Kind="StoreOutline" />
                        </Grid>-->

                        <!--  Trigger  -->
                        <Grid
                            Margin="0,6"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorTrigger}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding V275Handler}" Value="{x:Static barCommon:LabelHandlers.CameraTrigger}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                Margin="3,0"
                                VerticalAlignment="Center"
                                Kind="Minus" />
                        </Grid>
                    </Grid>
                </DockPanel>
            </Button>
        </Border>

    </DockPanel>
</ResourceDictionary>