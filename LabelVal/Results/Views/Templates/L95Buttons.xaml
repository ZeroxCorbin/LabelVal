<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:barCommon="clr-namespace:BarcodeVerification.lib.Common;assembly=BarcodeVerification.lib"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:vm="clr-namespace:LabelVal.Results.ViewModels">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="SharedButtonStyles.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <!--  Resource for L95 device-specific buttons.  -->
    <DockPanel x:Key="L95Buttons">

        <!--  L95 Trigger  -->
        <Border
            Margin="3,0,0,0"
            VerticalAlignment="Center"
            BorderBrush="{DynamicResource L95_Brush_Active}"
            BorderThickness="1"
            CornerRadius="3">

            <Border.Style>
                <Style TargetType="{x:Type Border}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.Offline}">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorDetect}">
                            <Setter Property="ToolTip" Value="L95: Process the source image and detect sectors." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorRestore}">
                            <Setter Property="ToolTip" Value="L95: Process the source image and restore sectors from the database." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorTrigger}">
                            <Setter Property="ToolTip" Value="L95: Process the source image without sector detection or restoration." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.CameraDetect}">
                            <Setter Property="ToolTip" Value="L95: Trigger the camera, then detect sectors." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.CameraRestore}">
                            <Setter Property="ToolTip" Value="L95: Trigger the camera, then restore sectors from the database." />
                        </DataTrigger>

                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.CameraTrigger}">
                            <Setter Property="ToolTip" Value="L95: Trigger the camera." />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>

            <Button
                Command="{Binding AddDeviceImageCommand}"
                CommandParameter="{x:Static vm:ResultsEntryDevices.L95}"
                IsEnabled="{Binding IsL95Working, Converter={StaticResource InvertBool}}"
                Style="{StaticResource DeviceButton}">

                <DockPanel>
                    <TextBlock
                        HorizontalAlignment="Center"
                        DockPanel.Dock="Top"
                        Style="{StaticResource MahApps.Styles.TextBlock.AutoCollapsing}"
                        Text="L95"
                        Visibility="{Binding AppSettings.ShowButtonText, Converter={StaticResource BooleanToVisibilityConverter}}" />

                    <Grid Background="{DynamicResource L95_Brush_Active}">

                        <mah:MetroProgressBar
                            Width="62"
                            Height="6"
                            Padding="0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Foreground="White"
                            IsIndeterminate="{Binding IsL95Working}"
                            Visibility="{Binding IsL95Working, Converter={StaticResource BooleanToVisibilityConverter}}" />

                        <!--  Camera  -->
                        <Grid
                            Margin="0,6"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.CameraDetect}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>

                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.CameraRestore}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>

                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.CameraTrigger}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                Margin="3,0"
                                VerticalAlignment="Center"
                                Kind="CameraIris" />
                        </Grid>

                        <!--  Simulator  -->
                        <Grid
                            Margin="0,6"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorDetect}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorRestore}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorTrigger}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                Margin="3,0"
                                VerticalAlignment="Center"
                                Kind="FolderImage" />

                        </Grid>

                        <!--  Detect  -->
                        <Grid
                            Margin="0,6"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorDetect}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.CameraDetect}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                Margin="3,0"
                                VerticalAlignment="Center"
                                Kind="DataMatrixScan" />
                        </Grid>

                        <!--<Grid
                        Margin="0,6"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom">
                        <Grid.Style>
                            <Style TargetType="{x:Type Grid}">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static bar_common:LabelHandlers.SimulatorRestore}">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static bar_common:LabelHandlers.CameraRestore}">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Style>

                        <iconPacks:PackIconMaterial
                            Width="18"
                            Height="18"
                            Margin="3,0"
                            VerticalAlignment="Center"
                            Kind="Restore" />
                    </Grid>-->

                        <!--  Trigger  -->
                        <Grid
                            Margin="0,6"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom">
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.SimulatorTrigger}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.CameraTrigger}">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                            <iconPacks:PackIconMaterial
                                Width="18"
                                Height="18"
                                Margin="3,0"
                                VerticalAlignment="Center"
                                Kind="Minus" />
                        </Grid>
                    </Grid>
                </DockPanel>
            </Button>
        </Border>

        <!--  ToggleButton to redirect L95 results to the current image roll.  -->
        <ToggleButton
            Width="48"
            Height="48"
            Margin="3,0,0,0"
            Padding="0"
            VerticalAlignment="Center"
            HorizontalContentAlignment="Stretch"
            VerticalContentAlignment="Stretch"
            BorderBrush="{DynamicResource L95_Brush_Active}"
            Foreground="{DynamicResource MahApps.HamburgerMenu.Pane.Foreground}"
            IsChecked="{Binding IsL95Selected}"
            IsEnabled="{Binding IsL95Working, Converter={StaticResource InvertBool}}">
            <ToggleButton.Style>
                <Style BasedOn="{StaticResource MahApps.Styles.ToggleButton}" TargetType="ToggleButton">
                    <Setter Property="ToolTip" Value="Redirect L95 results to this image roll." />
                    <Setter Property="Content">
                        <Setter.Value>
                            <DockPanel>
                                <DockPanel>
                                    <TextBlock
                                        HorizontalAlignment="Center"
                                        DockPanel.Dock="Top"
                                        Style="{StaticResource MahApps.Styles.TextBlock.AutoCollapsing}"
                                        Text="L95"
                                        Visibility="{Binding AppSettings.ShowButtonText, Converter={StaticResource BooleanToVisibilityConverter}}" />

                                    <Grid>
                                        <Image
                                            Width="24"
                                            Height="24"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Source="/Assets/Images/l95-white-outline.ico" />
                                    </Grid>
                                </DockPanel>
                            </DockPanel>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>

                        <!--  Visual state when L95 redirection is active.  -->
                        <DataTrigger Binding="{Binding IsL95Selected}" Value="True">
                            <Setter Property="ToolTip" Value="L95 results are being redirected to this image roll. Click to disable." />
                            <Setter Property="Content">
                                <Setter.Value>
                                    <DockPanel>
                                        <TextBlock
                                            HorizontalAlignment="Center"
                                            DockPanel.Dock="Top"
                                            Style="{StaticResource MahApps.Styles.TextBlock.AutoCollapsing}"
                                            Text="L95"
                                            Visibility="{Binding AppSettings.ShowButtonText, Converter={StaticResource BooleanToVisibilityConverter}}" />

                                        <Grid Background="{DynamicResource L95_Brush_Active}">
                                            <Grid
                                                Margin="3,6"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom">

                                                <iconPacks:PackIconMaterial
                                                    Width="18"
                                                    Height="18"
                                                    Margin="3,0"
                                                    VerticalAlignment="Center"
                                                    Kind="Headphones" />
                                            </Grid>

                                            <iconPacks:PackIconMaterial
                                                Width="18"
                                                Height="18"
                                                Margin="0,6"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Bottom"
                                                Kind="ChevronTripleDown" />
                                        </Grid>
                                    </DockPanel>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding L95Handler}" Value="{x:Static barCommon:LabelHandlers.Offline}">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                    </Style.Triggers>

                </Style>
            </ToggleButton.Style>
        </ToggleButton>
    </DockPanel>
</ResourceDictionary>